<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>정보 캘린더</title>
    <link rel="stylesheet" href="../css/reset.css">
    <link rel="stylesheet" href="../css/header.css">
</head>
<style>
    .selectByUser {
        width: 400px;
        height: 250px;
        padding: 30px;
        background-color: #ffbb2e;
        border-radius: 20px;
        margin: 0 auto;
    }

    @import url("https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css");

    * {
        margin: 0;
        padding: 0;
        list-style: none;
        box-sizing: border-box;
    }

    /* 달력 */
    .rap {
        margin: 0 auto;
        width: 820px;
        padding-top: 120px;
    }

    .dateHead {
        margin-bottom: .4rem;
    }

    .dateHead div {
        background: #ffbb2e;
        color: #222;
        text-align: center;
    }

    .grid {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        grid-gap: 5px;
    }

    .grid div {
        padding: .6rem;
        font-size: .9rem;
        cursor: pointer;
    }

    .dateBoard div {
        color: #222;
        font-weight: bold;
        min-height: 6rem;
        padding: .6rem .8rem;
        border-radius: .6rem;
        border: 1px solid #eee;
    }

    .noColor {
        background: #eee;
    }

    .calTop {
        display: flex;
        justify-content: space-between;
        padding: 1rem 2rem;
        margin-top: 30px;
    }

    .btn {
        display: block;
        width: 20px;
        height: 20px;
        border: 3px solid #000;
        border-width: 3px 3px 0 0;
        cursor: pointer;
    }

    .prevDay {
        transform: rotate(-135deg);
    }

    .nextDay {
        transform: rotate(45deg);
    }
</style>

<body>
    <div id="headerwrap">
        <div id="header">
            <a href="main.html"><img src="../logo/logo.png" height="70px"></a>
            <div id="nav">
                <div class="dropdown">
                    <button class="ddBtn">꿀단지</button>
                    <div class="dropdown-content">
                        <a href="./html/ten.html">10대 꿀단지</a>
                        <a href="./html/twenty.html">20대 꿀단지</a>
                        <a href="./html/thirty.html">30대 꿀단지</a>
                    </div>
                </div>
                <div class="dropdown">
                    <button class="ddBtn">게임단지</button>
                    <div class="dropdown-content">
                        <a href="./html/game.html">공룡게임</a>
                        <a href="./html/roulette.html">룰렛게임</a>
                        <a href="#">(준비중)</a>
                    </div>
                </div>
                <div class="dropdown">
                    <button class="ddBtn">알림단지</button>
                    <div class="dropdown-content">
                        <a href="./html/calendar.html">정보 캘린더</a>
                        <a href="./html/event.html">행사 안내</a>
                        <a href="#">나의 일정</a>
                    </div>
                </div>
                <div class="dropdown">
                    <button class="ddBtn">문의하기</button>
                    <div class="dropdown-content">
                        <a href="./html/qna.html">자주하는 질문</a>
                    </div>
                </div>
            </div>
                <div class="userIcon">
                    <img src="../icon/main_menu.png">
                    <ul class="dropdown-content">
                        <a href="./loghtml/log.html">로그인</a>
                        <a href="./loghtml/membership.html">회원가입</a>
                        <a href="./loghtml/myPage.html">마이페이지</a>
                    </ul>
                </div>
    </div>
    <div class='rap'>
        <div class="selectByUser">
            <ul>
                <li class="selectList"></li>
            </ul>
        </div>
        <div class="calTop">
            <div class="btn prevDay"></div>
            <h2 class='dateTitle'></h2>
            <div class="btn nextDay"></div>
        </div>

        <div class="grid dateHead">
            <div>일</div>
            <div>월</div>
            <div>화</div>
            <div>수</div>
            <div>목</div>
            <div>금</div>
            <div>토</div>
        </div>

        <div id="date_grid" class="grid dateBoard"></div>
    </div>
</body>

<script>
    const jsonData = [
        { "date": 1, "content": "<br><br>" },
        { "date": 2, "content": "<br><br>" },
        { "date": 3, "content": "<br><br>" },
        { "date": 4, "content": "<br><br>" },
        { "date": 5, "content": "<br><br>" },
        { "date": 6, "content": "<br><br>" },
        { "date": 7, "content": "<br><br>" },
        { "date": 8, "content": "<br><br>" },
        { "date": 9, "content": "<br><br>" },
        { "date": 10, "content": "<br><br>" },
        { "date": 11, "content": "<br><br>" },
        { "date": 12, "content": "<br><br>" },
        { "date": 13, "content": "<br><br>" },
        { "date": 14, "content": "<br><br>" },
        { "date": 15, "content": "<br><br>" },
        { "date": 16, "content": "<br><br>" },
        { "date": 17, "content": "<br><br>" },
        { "date": 18, "content": "<br><br>" },
        { "date": 19, "content": "<br><br>" },
        { "date": 20, "content": "<br><br>" },
        { "date": 21, "content": "<br><br>" },
        { "date": 22, "content": "<br><br>" },
        { "date": 23, "content": "<br><br>" },
        { "date": 24, "content": "<br><br>" },
        { "date": 25, "content": "<br><br>" },
        { "date": 26, "content": "<br><br>" },
        { "date": 27, "content": "<br><br>" },
        { "date": 28, "content": "<br><br>" },
        { "date": 29, "content": "<br><br>" },
        { "date": 30, "content": "<br><br>" },
        { "date": 31, "content": "<br><br>" },
    ]

    // Date 포맷 
    const dateFormat = (date) => {
        return date.toLocaleDateString().replace(/\./g, "").split(" ");
    }
    // 달력 생성
    const makeCalendar = (date) => {

        // 현재의 년도와 월 받아오기
        const [nowYear, nowMonth] = dateFormat(date);

        // 지난달의 마지막 요일
        const prevDay = new Date(nowYear, nowMonth - 1, 1).getDay();

        // 현재 월의 마지막 날 구하기
        const lastDay = dateFormat(new Date(nowYear, nowMonth, 0)).pop() * 1;

        let htmlDummy = '';

        // 전달 날짜 표시하기
        for (let i = 0; i < prevDay; i++) {
            htmlDummy += `<div class="noColor"></div>`;
        }

        // 현재 날짜 표시하기
        for (let i = 1; i <= lastDay; i++) {
            htmlDummy += `<div id="date_${i}">${i}</div>`;
        }

        // 지금까지 추가한 날짜 박스
        const maxDay = prevDay + lastDay;

        // 마지막날이 들어있는 열에 남은 박스 채우기
        const nextDay = (Math.ceil(maxDay / 7) * 7) - maxDay;

        // 다음달 날짜
        for (let i = 0; i < nextDay; i++) {
            htmlDummy += `<div class="noColor"></div>`;
        }
        document.querySelector(`.dateBoard`).innerHTML = htmlDummy;
        document.querySelector(`.dateTitle`).innerText = `${nowYear}년 ${nowMonth}월`;
    }

    const date = new Date();

    // Date 객체를 보내서 달력 생성
    makeCalendar(date);
    date.setMonth(date.getMonth() - 1);

    // 이전달 이동
    document.querySelector(`.prevDay`).onclick = () => {
        makeCalendar(new Date(date.setMonth(date.getMonth() - 1)));
    }

    // 다음달 이동
    document.querySelector(`.nextDay`).onclick = () => {
        makeCalendar(new Date(date.setMonth(date.getMonth() + 1)));
    }

    //일정 이름 누르면 위에 있는 리스트에 들어가도록
    const events = []

    for (let idx = 1; idx < 36; idx++) {
        const date = document.querySelector(`#date_${idx}`)
        const new_div = document.createElement("div")
        new_div.style.backgroundColor = "transparent"
        new_div.style.fontWeight = "500"
        new_div.style.fontSize = "0.8em"


        new_div.onclick = () => {
            let user = document.querySelector('.selectList')
            user.innerHTML += new_div.innerHTML
        }

        if (date) date.appendChild(new_div)

        events.push({
            date: `${idx}`,
            content: "",   
            element: new_div
        })

    }
    
    // console.log(events.element);
    jsonData.forEach((dateObj, idx) => {
        events[idx].content = dateObj.content
        events[idx].element.innerHTML = dateObj.content
    })
</script>

</html>